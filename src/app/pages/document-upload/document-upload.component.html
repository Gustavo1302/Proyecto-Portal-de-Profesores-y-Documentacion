<div class="nav-buttons">
  <button type="button" title="Volver a Configuraci√≥n" class="icon-btn" (click)="goBack()">
    <span style="font-size:1.7rem;">&#8592;</span>
  </button>
  <button type="button" title="Ir al Panel Principal" class="icon-btn" (click)="goToMain()">
    <span style="font-size:1.7rem;">&#8962;</span>
  </button>
</div>

<div class="settings-container">
  <div class="settings-header">
    <h1>Subir Documento</h1>
    <p>Comparte tus proyectos y recursos con la comunidad</p>
  </div>

  <div class="settings-content">
    <!-- Lista de documentos del autor -->
    <div class="settings-section" *ngIf="documents.length">
      <h2>Mis documentos</h2>
      <ul style="list-style:none; padding-left:0;">
        <li *ngFor="let doc of documents" style="margin-bottom:8px;">
          <button
            type="button"
            class="btn-save"
            style="width:100%; text-align:left; padding:8px 12px; font-size:0.9rem;"
            (click)="startEdit(doc)"
            title="Editar este documento"
          >
            {{ doc.title }}
          </button>
        </li>
      </ul>
    </div>

    <form (ngSubmit)="onSubmit()">
      <div class="settings-section">
        <h2>Informaci√≥n del Documento</h2>

        <div class="form-group">
          <label for="title">T√≠tulo del documento:</label>
          <input
            type="text"
            id="title"
            name="title"
            required
            placeholder="Ingresa el t√≠tulo del documento"
            title="T√≠tulo del documento"
            [(ngModel)]="title"
          />
        </div>

        <div class="form-group">
          <label for="type">Tipo de documento (prioritario):</label>
          <select
            id="type"
            name="type"
            required
            title="Selecciona el tipo de documento"
            [(ngModel)]="type"
          >
            <option value="" disabled>Selecciona un tipo</option>
            <option *ngFor="let t of allowedTypes" [value]="t">{{ t }}</option>
          </select>
        </div>

        <div class="form-group">
          <label for="description">Descripci√≥n corta:</label>
          <textarea
            id="description"
            name="description"
            rows="3"
            maxlength="300"
            placeholder="Descripci√≥n breve que aparecer√° en el panel principal o con 'Leer m√°s'"
            title="Descripci√≥n corta del documento"
            [(ngModel)]="description"
          ></textarea>
        </div>
      </div>

      <div class="settings-section">
        <h2>Archivo PDF / PPT</h2>

        <div class="form-group">
          <label for="file">Selecciona el archivo:</label>
          <input
            type="file"
            id="file"
            name="file"
            required
            (change)="onFileChange($event)"
            title="Selecciona un archivo PDF o PPT/PPTX"
            accept="application/pdf,application/vnd.ms-powerpoint,application/vnd.openxmlformats-officedocument.presentationml.presentation"
          />
          <small>Solo se permiten archivos PDF o presentaciones PPT/PPTX.</small>
        </div>

        <div class="form-group">
          <label>Autor:</label>
          <input
            type="text"
            [value]="teacherName + ' (' + teacherEmail + ')'"
            disabled
            title="Autor del documento"
          />
        </div>
      </div>

      <div class="form-actions">
        <button type="submit" class="btn-save">
          {{ isEditing ? 'üíæ Guardar cambios' : 'üìÑ Publicar Documento' }}
        </button>
        <button type="button" class="btn-cancel" (click)="goBack()">‚ùå Cancelar</button>
      </div>

      <div class="form-actions" *ngIf="isEditing">
        <button type="button" class="btn-cancel" (click)="deleteSelected()">üóëÔ∏è Borrar documento</button>
      </div>

      <div
        class="status-message"
        [ngClass]="messageType"
        *ngIf="statusMessage"
      >
        {{ statusMessage }}
      </div>
    </form>
  </div>
</div>
